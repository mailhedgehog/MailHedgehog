import{d as I,b as V,i as J,J as U,L as G,u as K,l as $,m as O,p as P,o as s,c as o,a as t,v as c,t as n,k as e,n as j,q as C,s as b,g as L,F as p,f as v,M as Q,N as W,j as X,x as u}from"./index.7c685518.js";import{u as Y,a as Z,b as ee,c as te,d as se,r as oe,e as ae,f as ne}from"./email-attachments.8adca39d.js";import{_ as ie,L as re,a as le}from"./Copyright.vue_vue_type_script_setup_true_lang.6ffe6294.js";import{_ as de,F as ce}from"./FooterRightContent.836c43d2.js";import{r as xe}from"./EyeIcon.ee974f1b.js";import{r as E}from"./ExclamationTriangleIcon.9a469e73.js";import"./use-outside-click.1cf8d48f.js";const me={class:"min-h-screen flex flex-col bg-context-50 dark:bg-context-900"},ue={class:"flex justify-between items-center py-4 px-4 sm:px-6 lg:px-8 relative shadow dark:shadow-context-500"},_e={class:"inline-flex sm:space-x-3 z-10"},he={key:0,class:"flex-grow p-8 flex justify-center items-center"},pe={class:"flex flex-col items-center space-y-6"},ve=t("div",{class:"font-semibold text-4xl text-primary-600"}," 404 ",-1),fe={class:"text-context-900 dark:text-context-100 text-lg"},ye={class:"px-4 sm:px-6 lg:px-8"},ke={class:"overflow-hidden bg-context-50 dark:bg-context-900 border border-context-300 shadow dark:shadow-context-500 sm:rounded-lg mb-6 lg:mx-auto lg:max-w-6xl"},be={class:"px-4 py-5 sm:px-6"},we={class:"text-lg font-medium leading-6 text-context-900 dark:text-context-100 flex justify-between"},ge={class:"mt-1 max-w-2xl text-sm text-context-500 dark:text-context-400"},$e={class:"border-t border-context-200 px-4 py-5 sm:p-0"},je={class:"sm:divide-y sm:divide-context-200 sm:dark:divide-context-300"},Ce={class:"text-sm font-medium text-context-500 dark:text-context-400"},Ee={class:"mt-1 text-sm text-context-900 dark:text-context-100 sm:col-span-2 sm:mt-0"},Se={key:0},He={key:1,role:"list",class:"divide-y divide-context-200 dark:divide-context-200 rounded-md border border-context-200 dark:border-context-200"},Me={class:"flex items-center lg:mx-auto lg:max-w-6xl border-b-0 sm:border-b border-context-200 dark:border-context-400"},Te={class:"flex-grow"},Fe={class:"sm:hidden"},Be=["value","selected"],Le={class:"hidden sm:block"},Re={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Ae=["aria-current","onClick"],Ne={class:"pl-4"},qe={class:"hidden md:inline"},ze={key:0,class:"lg:mx-auto lg:max-w-6xl"},De={key:0,class:"py-6"},Ie=["height","srcdoc"],Ve={key:1,class:"flex justify-center items-center"},Je={class:"ml-4 text-context-900 dark:text-context-100"},Ue={key:1,class:"py-6"},Ge={key:0,class:"text-context-900 dark:text-context-100"},Ke={class:"overflow-auto"},Oe={key:1,class:"flex justify-center items-center"},Pe={class:"ml-4 text-context-900 dark:text-context-100"},Qe={key:2,class:"py-6"},We={class:"text-context-900 dark:text-context-100"},Xe={class:"overflow-auto"},Ye={key:3,class:"py-6"},Ze={key:0},et={role:"list",class:"divide-y divide-context-200 rounded-md border border-context-200"},tt={class:"flex w-0 flex-1 items-center"},st={class:"ml-2 w-0 flex-1 text-context-900 dark:text-context-100 truncate"},ot={key:0,class:"ml-2"},at={class:"ml-4 flex-shrink-0"},nt=["onClick"],it={class:"hidden md:inline"},rt={key:1,class:"flex justify-center items-center"},lt={class:"ml-4 text-context-900 dark:text-context-100"},dt={class:"py-4 px-4 sm:px-6 flex justify-between items-center shadow dark:shadow-context-500 text-context-900 dark:text-context-100"},yt=I({__name:"SharedMail",setup(ct){const{t:r}=V(),w=J("MailHedgehog");U();const R=G();K();const g=$(!1),S=$(!1),i=$(null),{isAllHeaders:f,headers:A}=Y(i),{currentTab:d,tabs:H}=Z(),{iframeHeight:N,resizeIframe:M}=ee(),{downloadEmailAttachment:q,downloadEmail:z}=te(i,{urlBuilder:(y,l)=>{var x;return`shared-email/${(x=l.value)==null?void 0:x.id}/attachment/${y}`}}),D=y=>{g.value=!0,w==null||w.request().get(`shared-email/${y}`).then(l=>{var x,_;(x=l.data)!=null&&x.data?i.value=(_=l.data)==null?void 0:_.data:i.value=null}).catch(()=>{S.value=!0}).finally(()=>{g.value=!1})};return O(()=>{D(R.params.id)}),(y,l)=>{var _,T,F;const x=P("tooltip");return s(),o("div",me,[t("div",ue,[c(de,{class:""}),t("div",_e,[c(ie),c(re)])]),S.value?(s(),o("div",he,[t("div",pe,[ve,t("div",fe,n(e(r)("sharedEmail.notFound")),1)])])):(s(),o("div",{key:1,class:j(["flex-grow flex flex-col py-8",{"pointer-events-none opacity-75":g.value}])},[t("div",ye,[t("div",ke,[t("div",be,[t("h3",we,[t("div",null,n(e(r)("email.headersTitle")),1),t("div",null,[C((s(),o("a",{class:"cursor-pointer",onClick:l[0]||(l[0]=b(a=>f.value=!e(f),["prevent"]))},[e(f)?(s(),L(e(se),{key:0,class:"text-primary-400 h-5 w-5"})):(s(),L(e(xe),{key:1,class:"text-primary-700 h-5 w-5"}))])),[[x,e(f)?e(r)("email.hintHideHeaders"):e(r)("email.hintShowHeaders")]])])]),t("p",ge,n(e(r)("email.headersSubtitle")),1)]),t("div",$e,[t("dl",je,[(s(!0),o(p,null,v(e(A),(a,m)=>(s(),o("div",{key:m,class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6"},[t("dt",Ce,n(m),1),t("dd",Ee,[a.length===1?(s(),o("div",Se,n(a[0]),1)):(s(),o("ul",He,[(s(!0),o(p,null,v(a,(h,k)=>(s(),o("li",{key:k,class:"py-3 pl-3 pr-4 text-sm"},n(h),1))),128))]))])]))),128))])])]),t("div",Me,[t("div",Te,[t("div",Fe,[C(t("select",{id:"tabs","onUpdate:modelValue":l[1]||(l[1]=a=>W(d)?d.value=a:null),name:"tabs",class:"block w-full rounded border-context-300 dark:border-context-600 py-2 pl-3 pr-10 text-base focus:border-primary-500 focus:primary-none focus:ring-primary-500 sm:text-sm"},[(s(!0),o(p,null,v(e(H),a=>(s(),o("option",{key:a.id,value:a.id,selected:e(d)==a.id},n(e(r)(`email.tab.${a.id}`)),9,Be))),128))],512),[[Q,e(d)]])]),t("div",Le,[t("nav",Re,[(s(!0),o(p,null,v(e(H),a=>{var m,h,k,B;return s(),o("a",{key:a.id,href:"#",class:j(["whitespace-nowrap flex py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-500",[e(d)===a.id?"border-primary-500 text-primary-600":"cursor-pointer border-transparent text-context-500 dark:text-context-400 hover:text-context-700 hover:dark:text-context-300 hover:border-context-200 hover:dark:border-context-400"]]),"aria-current":e(d)===a.id?"page":void 0,onClick:b(xt=>d.value=a.id,["prevent"])},[X(n(e(r)(`email.tab.${a.id}`))+" ",1),a.id==="attachments"&&((h=(m=i.value)==null?void 0:m.attachments)==null?void 0:h.length)!==void 0?(s(),o("span",{key:0,class:j(["inline-block ml-3 py-0.5 px-2.5 rounded-full text-xs font-medium transition-colors duration-500",[e(d)===a.id?"bg-primary-100 text-primary-600":"bg-context-200 dark:bg-context-700 text-context-900 dark:text-context-100"]])},n((B=(k=i.value)==null?void 0:k.attachments)==null?void 0:B.length),3)):u("",!0)],10,Ae)}),128))])])]),t("div",Ne,[C((s(),o("button",{type:"button",class:"btn btn--default rounded",onClick:l[2]||(l[2]=b(a=>e(z)(),["prevent"]))},[c(e(oe),{class:"md:mr-2 h-5 w-5"}),t("span",qe,n(e(r)("email.download")),1)])),[[x,e(r)("email.downloadHint")]])])]),i.value?(s(),o("div",ze,[e(d)==="html"?(s(),o("div",De,[i.value.html?(s(),o("iframe",{key:0,id:"preview-html",height:e(N),srcdoc:i.value.html,class:"w-full border border-context-200 dark:border-context-400",onLoad:l[3]||(l[3]=(...a)=>e(M)&&e(M)(...a))},null,40,Ie)):(s(),o("div",Ve,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",Je,n(e(r)("email.htmlEmpty")),1)]))])):u("",!0),e(d)==="plain"?(s(),o("div",Ue,[i.value.plain?(s(),o("div",Ge,[t("pre",Ke,n(i.value.plain),1)])):(s(),o("div",Oe,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",Pe,n(e(r)("email.plainEmpty")),1)]))])):u("",!0),e(d)==="source"?(s(),o("div",Qe,[t("div",We,[t("pre",Xe,n(i.value.source),1)])])):u("",!0),e(d)==="attachments"?(s(),o("div",Ye,[((T=(_=i.value)==null?void 0:_.attachments)==null?void 0:T.length)>0?(s(),o("div",Ze,[t("ul",et,[(s(!0),o(p,null,v((F=i.value)==null?void 0:F.attachments,(a,m)=>(s(),o("li",{key:m,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},[t("div",tt,[c(e(ae),{class:"text-context-400 dark:text-context-500 flex-shrink-0 h-5 w-5"}),t("span",st,[t("span",null,n(a.filename),1),a.contentType?(s(),o("span",ot," ("+n(a.contentType)+") ",1)):u("",!0)])]),t("div",at,[t("a",{class:"cursor-pointer font-medium text-primary-500 hover:text-primary-600 transition-colors duration-500",onClick:b(h=>e(q)(a),["prevent"])},[c(e(ne),{class:"md:hidden flex-shrink-0 h-5 w-5"}),t("span",it,n(e(r)("email.download")),1)],8,nt)])]))),128))])])):(s(),o("div",rt,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",lt,n(e(r)("email.noAttachments")),1)]))])):u("",!0)])):u("",!0)])],2)),t("div",dt,[c(le),c(ce)])])}}});export{yt as default};
