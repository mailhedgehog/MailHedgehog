import{o as d,c as m,a as s,d as y,u as k,r as j,F as D,b as T,e as o,w as c,n as S,f as h,g as U,h as B,t as p,i as t,j as $,k as b,l as O,m as A,p as W,q,T as I,s as w,v as E,x as V,y as F}from"./index.029da219.js";import{I as R,g as G,S as J,v as P,_ as X,L as K,a as Q}from"./Copyright.vue_vue_type_script_setup_true_lang.d7db5100.js";import{N as z,o as g,_ as L,r as Y,U as Z,f as N}from"./ExclamationTriangleIcon.552b56b4.js";import"./use-outside-click.ec231493.js";function H(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"})])}function ee(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})])}function te(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 3.75H6.912a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859M12 3v8.25m0 0l-3-3m3 3l3-3"})])}function se(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3l8.735 8.735m0 0a.374.374 0 11.53.53m-.53-.53l.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 010 5.304m2.121-7.425a6.75 6.75 0 010 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 01-1.06-2.122m-1.061 4.243a6.75 6.75 0 01-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12z"})])}function oe(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.348 14.651a3.75 3.75 0 010-5.303m5.304 0a3.75 3.75 0 010 5.303m-7.425 2.122a6.75 6.75 0 010-9.546m9.546 0a6.75 6.75 0 010 9.546M5.106 18.894c-3.808-3.808-3.808-9.98 0-13.789m13.788 0c3.808 3.808 3.808 9.981 0 13.79M12 12h.008v.007H12V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])}function ne(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})])}function ae(f,e){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}const re={class:"mt-5 flex-shrink-0 divide-y divide-primary-800 overflow-y-auto","aria-label":"Sidebar"},le={class:"space-y-1 px-2"},ie=["href","aria-current","onClick"],C=y({__name:"AppNavigation",setup(f){const{t:e}=k(),n=[{name:"inbox",href:"/",icon:te}];return(a,l)=>{const r=j("router-link");return d(),m("nav",re,[s("div",le,[(d(),m(D,null,T(n,i=>o(r,{key:i.name,custom:"",to:i.href},{default:c(({href:_,navigate:u,isActive:v})=>[s("a",{href:_,class:S([v?"bg-primary-800 text-context-50":"text-primary-100 hover:text-context-50 hover:bg-primary-600","group flex items-center px-2 py-2 text-sm leading-6 font-medium rounded-md"]),"aria-current":v?"page":void 0,onClick:u},[(d(),h(U(i.icon),{class:"mr-4 h-6 w-6 flex-shrink-0 text-primary-200","aria-hidden":"true"})),B(" "+p(t(e)(`menu.${i.name}`)),1)],10,ie)]),_:2},1032,["to"])),64))])])}}}),ce=["disabled","onClick"],de={__name:"WebsocketConnector",setup(f){const e=$("MailHedgehog"),n=b(!1),a=b(null),l=()=>{n.value=!0,a.value&&a.value.close(),a.value=null,n.value=!1},r=u=>{switch(u.type){case"new_message":e.$emit("new_message",u.data),e==null||e.info("Message received");break;default:e==null||e.error(`Online system flow type ${u.type} not supported`)}},i=()=>{if(a.value)return;n.value=!0;let u=e==null?void 0:e.configValue("http.baseUrl","").trim().replace(/\/+$/,"").replace(/(http)(s)?\:\/\//,"ws$2://");u.startsWith("//")&&(u=`ws:${u}`),a.value=new WebSocket(`${u}/websocket`),a.value.onopen=()=>{},a.value.onclose=()=>{l()},a.value.onerror=()=>{e==null||e.error("Online connection error")},a.value.onmessage=v=>{try{const x=JSON.parse(v.data);switch(x.flow){case"system":r(x);break;default:e==null||e.error(`Online message flow ${x.flow} not supported`)}}catch(x){console.error(x),console.error(v.data)}},n.value=!1},_=()=>{a.value?l():i()};return O(()=>{i()}),(u,v)=>{const x=A("tooltip");return W((d(),m("button",{class:"cursor-pointer text-context-400 dark:text-context-600 flex items-center justify-center font-medium uppercase",disabled:n.value,onClick:q(_,["prevent"])},[a.value?(d(),h(t(oe),{key:0,class:"h-6 w-6","aria-hidden":"true"})):(d(),h(t(se),{key:1,class:"h-6 w-6","aria-hidden":"true"}))],8,ce)),[[x,a.value?"Online":"Offline"]])}}},ue=de,fe=y({__name:"ProfileDropdown",setup(f){const e=$("MailHedgehog"),n=()=>{e==null||e.request().post("logout").finally(()=>{e==null||e.setAuthToken();const a=()=>{let r=e==null?void 0:e.configValue("http.baseUrl","").trim().replace(/\/+$/,"");r=`${r}/`,window.open(r,"_self")},l=new XMLHttpRequest;l.open("GET","./mh-configuration.json",!1,"logout","logout"),l.onload=()=>{l.readyState===4&&a()},l.onerror=()=>a(),l.send(null)})};return(a,l)=>(d(),h(t(P),{as:"div",class:"icon-select"},{default:c(()=>[s("div",null,[o(t(R),{class:"icon-select__menu-btn flex max-w-xs items-center rounded-full text-sm focus:outline-none lg:rounded-md lg:p-2"},{default:c(()=>[o(t(ne),{class:"w-8 h-8"}),o(t(ee),{class:"ml-1 h-5 w-5 flex-shrink-0 text-context-400 dark:text-context-600","aria-hidden":"true"})]),_:1})]),o(I,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:c(()=>[o(t(G),{class:"icon-select__menu w-48"},{default:c(()=>[o(t(J),null,{default:c(({active:r})=>[s("a",{class:S([[r?"icon-select__menu-item--active":""],"icon-select__menu-item"]),onClick:n},p(a.$t("menu.logout")),3)]),_:1})]),_:1})]),_:1})]),_:1}))}}),me={class:"flex flex-shrink-0 justify-center items-center"},pe=["src","alt"],xe={class:"text-context-100 font-bold text-sm sm:text-base"},M=y({__name:"Logo",setup(f){const{t:e}=k(),n=$("MailHedgehog"),a=w(()=>n==null?void 0:n.configValue("ui.appName",null)),l=w(()=>n==null?void 0:n.configValue("ui.appLogoUrl","/MailHedgehog.svg")),r=w(()=>n==null?void 0:n.configValue("ui.appLogoStyle",[]));return(i,_)=>(d(),m("div",me,[s("img",{class:"h-8 w-auto mr-2",src:t(l),style:E(t(r)),alt:t(a)||t(e)("app.title")},null,12,pe),s("div",xe,p(t(a)||t(e)("app.title")),1)]))}}),_e=s("div",{class:"fixed inset-0 bg-context-500 dark:bg-context-900 bg-opacity-75 dark:bg-opacity-75 transition-opacity"},null,-1),ve={class:"fixed inset-0 z-10 overflow-y-auto"},he={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},we={class:"sm:flex sm:items-start"},ge={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},ye={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ke={class:"mt-2"},be={class:"text-sm text-context-500 dark:text-context-400"},$e={class:"mt-5 sm:mt-4 sm:flex justify-end"},Ce=y({__name:"Dialog",setup(f){const{t:e}=k(),n=V(),a=w(()=>n.getters["confirmDialog/show"]);return(l,r)=>(d(),h(t(N),{as:"template",show:t(a)},{default:c(()=>[o(t(z),{as:"div",class:"relative z-10",onClose:r[2]||(r[2]=i=>t(n).dispatch("confirmDialog/decline"))},{default:c(()=>[o(t(g),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[_e]),_:1}),s("div",ve,[s("div",he,[o(t(g),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:c(()=>[o(t(L),{class:"relative transform overflow-hidden rounded-lg px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 w-full sm:max-w-lg sm:p-6 bg-context-50 dark:bg-context-900"},{default:c(()=>[s("div",we,[s("div",ge,[o(t(Y),{class:"h-6 w-6 text-primary-600","aria-hidden":"true"})]),s("div",ye,[o(t(Z),{as:"h3",class:"text-lg font-medium leading-6 text-context-900 dark:text-context-50"},{default:c(()=>[B(p(t(n).getters["confirmDialog/modalTitle"]||t(e)("confirmDialog.modalTitle")),1)]),_:1}),s("div",ke,[s("p",be,p(t(n).getters["confirmDialog/modalText"]||t(e)("confirmDialog.modalText")),1)])])]),s("div",$e,[s("button",{ref:"cancelButtonRef",type:"button",class:"btn btn--default w-full sm:w-36 justify-center mb-4 sm:mb-0 sm:mr-4",onClick:r[0]||(r[0]=i=>t(n).dispatch("confirmDialog/decline"))},p(t(n).getters["confirmDialog/btnCancel"]||t(e)("confirmDialog.btnCancel")),513),s("button",{type:"button",class:"btn btn--primary w-full sm:w-36 justify-center",onClick:r[1]||(r[1]=i=>t(n).dispatch("confirmDialog/accept"))},p(t(n).getters["confirmDialog/btnAccept"]||t(e)("confirmDialog.btnAccept")),1)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),Me=s("div",{class:"fixed inset-0 bg-context-600 bg-opacity-75"},null,-1),je={class:"fixed inset-0 z-40 flex"},De={class:"absolute top-0 right-0 -mr-12 pt-2"},Se={class:"sr-only"},Be=s("div",{class:"w-14 flex-shrink-0","aria-hidden":"true"},null,-1),Ve={class:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col"},ze={class:"flex flex-grow flex-col overflow-y-auto bg-primary-700 pt-5 pb-4"},Le={class:"min-h-screen flex flex-1 flex-col lg:pl-64 bg-context-100 dark:bg-context-900"},Ne={class:"flex h-16 flex-shrink-0 border-b border-context-200 dark:border-context-700 bg-context-50 dark:bg-context-900 lg:border-none z-10 shadow dark:shadow-context-500"},Te={class:"sr-only"},Ue={class:"flex flex-1 justify-between px-4 sm:px-6 lg:mx-auto lg:max-w-6xl lg:px-8"},Oe=s("div",{id:"header-search",class:"flex flex-1"},null,-1),Ae={class:"ml-4 flex items-center md:ml-6 space-x-3"},We={class:"flex-grow flex-1 pb-8 overflow-hidden"},qe={class:"py-4 px-4 sm:px-6 flex justify-between items-center shadow dark:shadow-context-500 text-context-900 dark:text-context-100"},Ie=s("div",{class:"hidden sm:block text-sm text-context-300 dark:text-context-700 select-none"},[s("div",{class:"sr-only"}," #StandWithUkraine ")],-1),Je=y({__name:"Dashboard",setup(f){const{t:e}=k(),n=V(),a=w(()=>n.getters.getUser),l=b(!1);return(r,i)=>{const _=j("router-view");return d(),m(D,null,[o(t(N),{as:"template",show:l.value},{default:c(()=>[o(t(z),{as:"div",class:"relative z-40 lg:hidden",onClose:i[1]||(i[1]=u=>l.value=!1)},{default:c(()=>[o(t(g),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Me]),_:1}),s("div",je,[o(t(g),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:c(()=>[o(t(L),{class:"relative flex w-full max-w-xs flex-1 flex-col bg-primary-700 pt-5 pb-4"},{default:c(()=>[o(t(g),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[s("div",De,[s("button",{type:"button",class:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-context-50 focus:dark:ring-context-900",onClick:i[0]||(i[0]=u=>l.value=!1)},[s("span",Se,p(t(e)("sidebar.close")),1),o(t(ae),{class:"h-6 w-6 text-context-50","aria-hidden":"true"})])])]),_:1}),o(M,{class:"px-4"}),o(C)]),_:1})]),_:1}),Be])]),_:1})]),_:1},8,["show"]),s("div",Ve,[s("div",ze,[o(M,{class:"px-4"}),o(C)])]),s("div",Le,[s("div",Ne,[s("button",{type:"button",class:"border-r border-context-200 dark:border-context-700 px-4 text-context-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:i[2]||(i[2]=u=>l.value=!0)},[s("span",Te,p(t(e)("sidebar.open")),1),o(t(H),{class:"h-6 w-6","aria-hidden":"true"})]),s("div",Ue,[Oe,s("div",Ae,[o(ue),o(X),o(K),t(a)?(d(),h(fe,{key:0})):F("",!0)])])]),s("main",We,[o(_)]),s("div",qe,[o(Q),Ie])]),o(Ce)],64)}}});export{Je as default};
